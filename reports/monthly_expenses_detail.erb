<% @expenses = RegisterReport.run(
  inner_where_clauses: ["
             (
               account ~ '^Expenses'
               and account !~ '(Depreciation|Taxes|Interest|Insurance|Travel|Computers|Medical|Bike|Wedding|Furniture|Stripe|Car|Moving|Sales|House)'
               and tags !~ '(Emergency|Reimbursable)'
             )
             or
             (
               account in ('Expenses:Interest:Mortgage', 'Assets:House:Equity', 'Assets:House:Escrow')
               and tags !~ 'nobudget'
             )"
   ]
) %>
<%= table @expenses do |t| 
      t.decorate :all => LedgerWeb::Decorators::HighlightDecorator.new('#d9edf7'), :if => lambda{|c,r| !r[5].value }
      t.decorate /Xtn/ => LedgerWeb::Decorators::IconDecorator.new('chevron-right')
      t.link /Account/ => "/reports/register?account=:this&include_virtual=#{params[:include_virtual]}&year=#{params[:year]}&month=#{params[:month]}"
      t.link /Xtn/ => "/reports/register?xtn_id=:this&include_virtual=#{params[:include_virtual]}"
    end %>
